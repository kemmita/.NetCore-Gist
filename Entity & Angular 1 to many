1. we want to create a 1 to many relationship for a user with many photos, so first go to models folder and create a new model called User
using System;
using System.Collections.Generic;
using System.Collections.ObjectModel;

namespace DatingApp.API.models
{
    public class User
    {
        public int Id { get; set; }
        public string UserName {get; set;}
        public byte[] PasswordHash {get; set;} 
        public byte[] PasswordSalt {get; set;}
        public string Gender { get; set; }
        public DateTime DateOfBirth {get; set;}
        public string KnownAs { get; set; }
        public DateTime Created { get; set; }
        public DateTime LastActive {get; set;}
        public string Introduction { get; set; }
        public string LookingFor { get; set; }
        public string Interests { get; set; }
        public string City { get; set; }
        public string Country { get; set; }

        //here we create the 1-to-many relationship, without using a icollection or ienumerable the one to many would not be established
        public ICollection<Photo> Photos { get; set; }

        //we then create a constructor to intialize the collection
        public User (){
            Photos = new Collection<Photo>();
        }
    }
}

2. we now need to create our photo model/tabel in our models folder
using System;

namespace DatingApp.API.models
{
    public class Photo
    {
        public int Id { get; set; }
        public string Url { get; set; }
        public string Description { get; set; }
        public DateTime DateAdded { get; set; }
        public bool IsMain { get; set; }

        //here we create a user column that references the user table, we then create a UserId to act as a foreign key
        public User User { get; set; }
        public int UserId { get; set; }
    }
}

3. go to our datacontext and add our dbsets
using DatingApp.API.models;
using Microsoft.EntityFrameworkCore;

namespace DatingApp.API.Data
{
    public class DataContext: DbContext
    {
        public DataContext(DbContextOptions<DataContext> options): base(options){}
        public DbSet<User> Users{get; set;}
        public DbSet<Photo> Photos{get; set;}
    }
}

4.if you are working in vs code run dotnet ef migrations add Examplemessage
//the code I paste below is auto generated, I just want to display the foreign key relatiuonship
     modelBuilder.Entity("DatingApp.API.models.Photo", b =>
                {
                    b.HasOne("DatingApp.API.models.User", "User")
                        .WithMany("Photos")
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade);
                });
 
 5.now run dotnet ef database update
 if you check your database all columns and FK should be displayed 
 
 
6. now we will create a method to fetch both the user "ONE" and the photos "MANY"
  public async Task<User> GetUser(int Id)
    {
      var user = await _context.Users.Include(p => p.Photos).FirstOrDefaultAsync(u=>u.Id == Id);

      return user;
    }
//above will retrieve one user and below will retrieve all users, notice how we use Entity framework along wiht its "Include" method
    public async Task<IEnumerable<User>> GetUsers()
    {
      var users = await _context.Users.Include(p=> p.Photos).ToListAsync();
      return users;
    }
    


